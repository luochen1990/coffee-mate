{"version":3,"file":"reinforce.js","sources":["reinforce.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,WAAA;IAAA;;EAAA,WAAA,GAAc,SAAC,GAAD;AAGb,QAAA;IAHe,qBAAQ,mBAAO;IAG9B,MAAM,CAAC,gBAAP,CAAwB,MAAM,CAAC,SAA/B,EACC;MAAA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAC,IAAD;iBACN,IAAC,CAAC,OAAF,CAAU,YAAV,EAAwB,SAAC,CAAD,EAAI,CAAJ;YAAU,IAAG,eAAH;qBAAiB,IAAK,CAAA,CAAA,EAAtB;aAAA,MAAA;qBAA8B,EAA9B;;UAAV,CAAxB;QADM,CADP;OADD;MAIA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAC,CAAD;AACN,cAAA;UAAA,MAAW,CAAC,EAAD,EAAK,IAAL,CAAX,EAAC,UAAD,EAAI;AACJ,iBAAM,CAAA,GAAI,CAAV;YACC,IAAY,CAAA,GAAI,CAAhB;cAAA,CAAA,IAAK,IAAL;;YACA,CAAA,KAAM;YACN,GAAA,IAAO;UAHR;AAIA,iBAAO;QAND,CADP;OALD;MAaA,GAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAC,SAAD,EAAY,OAAZ;AACN,cAAA;UAAA,CAAA,GAAI,IAAC,CAAC,MAAF,CAAS,SAAT,CAAA,GAAsB;UAC1B,IAAe,CAAA,KAAK,CAApB;AAAA,mBAAO,KAAP;;UACA,CAAA,GAAI,IAAC,CAAC,MAAF,CAAS,CAAT,CAAW,CAAC,MAAZ,CAAmB,OAAnB;UACJ,IAAe,CAAA,KAAK,CAAC,CAArB;AAAA,mBAAO,KAAP;;iBACA,IAAC,CAAC,MAAF,CAAS,CAAT,EAAY,CAAZ;QALM,CADP;OAdD;KADD;IAyBA,MAAM,CAAC,gBAAP,CAAwB,KAAK,CAAC,SAA9B,EACC;MAAA,KAAA,EACC;QAAA,GAAA,EAAK,SAAA;iBAAG,IAAE,CAAA,CAAA;QAAL,CAAL;QACA,GAAA,EAAK,SAAC,CAAD;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO;QAAd,CADL;OADD;MAGA,MAAA,EACC;QAAA,GAAA,EAAK,SAAA;iBAAG,IAAE,CAAA,CAAA;QAAL,CAAL;QACA,GAAA,EAAK,SAAC,CAAD;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO;QAAd,CADL;OAJD;MAMA,KAAA,EACC;QAAA,GAAA,EAAK,SAAA;iBAAG,IAAE,CAAA,CAAA;QAAL,CAAL;QACA,GAAA,EAAK,SAAC,CAAD;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO;QAAd,CADL;OAPD;MASA,IAAA,EACC;QAAA,GAAA,EAAK,SAAA;iBAAG,IAAE,CAAA,IAAC,CAAA,MAAD,GAAU,CAAV;QAAL,CAAL;QACA,GAAA,EAAK,SAAC,CAAD;iBAAO,IAAE,CAAA,IAAC,CAAA,MAAD,GAAU,CAAV,CAAF,GAAiB;QAAxB,CADL;OAVD;MAYA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAC,CAAD;AACN,cAAA;UAAA,MAAW,CAAC,EAAD,EAAK,IAAL,CAAX,EAAC,UAAD,EAAI;AACJ,iBAAM,CAAA,GAAI,CAAV;YACC,IAAqB,CAAA,GAAI,CAAzB;cAAA,CAAA,GAAI,CAAC,CAAC,MAAF,CAAS,GAAT,EAAJ;;YACA,CAAA,KAAM;YACN,GAAA,GAAM,GAAG,CAAC,MAAJ,CAAW,GAAX;UAHP;AAIA,iBAAO;QAND,CADP;OAbD;MAqBA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAU,CAAA,SAAA;AACT,cAAA;UAAA,IAAA,GAAO,IAAI;iBACX,SAAC,KAAD;AACC,gBAAA;YAAA,CAAA,GAAI;YACJ,CAAA,GAAI;YACJ,IAAO,aAAP;AACC;AAAA,mBAAA,6CAAA;;sBAAmB,CAAA,KAAK;;;gBACvB,IAAE,CAAA,CAAA,CAAF,GAAO,CAAA,GAAI;gBACX,CAAA,IAAK;AAFN,eADD;aAAA,MAAA;AAKC;AAAA,mBAAA,gDAAA;;sBAAmB,CAAA,KAAK,IAAL,IAAa,CAAI,KAAA,CAAM,CAAN,EAAS,CAAT;;;gBACnC,IAAE,CAAA,CAAA,CAAF,GAAO,CAAA,GAAI;gBACX,CAAA,IAAK;AAFN,eALD;;YAQA,IAAC,CAAA,MAAD,CAAQ,CAAR,EAAW,KAAX;AACA,mBAAO;UAZR;QAFS,CAAA,CAAH,CAAA,CADP;OAtBD;KADD;IA0CA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,EACC;MAAA,IAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAC,CAAD;iBAAO,MAAM,CAAC,IAAP,CAAY,CAAZ,CAAc,CAAC;QAAtB,CADP;OADD;MAGA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAA;AACN,cAAA;UADO,qBAAM;AACb,eAAA,0CAAA;;gBAAuB;AACtB,mBAAA,MAAA;;;kBAAA,IAAK,CAAA,CAAA,IAAM;;AAAX;;AADD;AAEA,iBAAO;QAHD,CADP;OAJD;MASA,MAAA,EACC;QAAA,UAAA,EAAY,KAAZ;QACA,KAAA,EAAO,SAAA;AACN,cAAA;UADO,qBAAM;AACb,eAAA,yCAAA;;gBAAsB;AACrB,mBAAA,MAAA;;gBAAA,IAAK,CAAA,CAAA,CAAL,GAAU;AAAV;;AADD;AAEA,iBAAO;QAHD,CADP;OAVD;KADD;AAiBA,WAAO;MACN,QAAA,MADM;MACE,OAAA,KADF;MACS,QAAA,MADT;;EAvFM;;EA2Fd,MAAM,CAAC,OAAP,GAAiB,WAAA,CAAY;IAAC,QAAA,MAAD;IAAS,OAAA,KAAT;IAAgB,QAAA,MAAhB;GAAZ;AA3FjB","sourcesContent":["this_module = ({String, Array, Object}) ->\n\t# reinforce String\n\n\tObject.defineProperties String.prototype,\n\t\tformat:\n\t\t\tenumerable: false\n\t\t\tvalue: (args) ->\n\t\t\t\t@.replace /\\{(\\w+)\\}/g, (m, i) -> if args[i]? then args[i] else m\n\t\trepeat:\n\t\t\tenumerable: false\n\t\t\tvalue: (n) ->\n\t\t\t\t[r, pat] = ['', @]\n\t\t\t\twhile n > 0\n\t\t\t\t\tr += pat if n & 1\n\t\t\t\t\tn >>= 1\n\t\t\t\t\tpat += pat\n\t\t\t\treturn r\n\t\tcut:\n\t\t\tenumerable: false\n\t\t\tvalue: (start_pat, end_pat) ->\n\t\t\t\ti = @.search(start_pat) + 1\n\t\t\t\treturn null if i == 0\n\t\t\t\tj = @.substr(i).search(end_pat)\n\t\t\t\treturn null if j == -1\n\t\t\t\t@.substr(i, j)\n\n\t# reinforce Array\n\n\tObject.defineProperties Array.prototype,\n\t\tfirst:\n\t\t\tget: -> @[0]\n\t\t\tset: (v) -> @[0] = v\n\t\tsecond:\n\t\t\tget: -> @[1]\n\t\t\tset: (v) -> @[1] = v\n\t\tthird:\n\t\t\tget: -> @[2]\n\t\t\tset: (v) -> @[2] = v\n\t\tlast:\n\t\t\tget: -> @[@length - 1]\n\t\t\tset: (v) -> @[@length - 1] = v\n\t\trepeat:\n\t\t\tenumerable: false\n\t\t\tvalue: (n) ->\n\t\t\t\t[r, pat] = [[], @]\n\t\t\t\twhile n > 0\n\t\t\t\t\tr = r.concat(pat) if n & 1\n\t\t\t\t\tn >>= 1\n\t\t\t\t\tpat = pat.concat(pat)\n\t\t\t\treturn r\n\t\tunique:\n\t\t\tenumerable: false\n\t\t\tvalue: do ->\n\t\t\t\tinit = new Object\n\t\t\t\t(equal)->\n\t\t\t\t\ti = 0\n\t\t\t\t\tt = init\n\t\t\t\t\tif not equal?\n\t\t\t\t\t\tfor x, j in @ when x != t\n\t\t\t\t\t\t\t@[i] = t = x\n\t\t\t\t\t\t\ti += 1\n\t\t\t\t\telse\n\t\t\t\t\t\tfor x, j in @ when t is init or not equal(x, t)\n\t\t\t\t\t\t\t@[i] = t = x\n\t\t\t\t\t\t\ti += 1\n\t\t\t\t\t@splice(i, Infinity)\n\t\t\t\t\treturn @\n\n\t# reinforce Object\n\n\tObject.defineProperties Object,\n\t\tsize:\n\t\t\tenumerable: false\n\t\t\tvalue: (d) -> Object.keys(d).length\n\t\textend:\n\t\t\tenumerable: false\n\t\t\tvalue: (base, defaults...) -> #NOTE: modified inplace, use copy() to protect it.\n\t\t\t\tfor d in defaults when d?\n\t\t\t\t\tbase[k] ?= v for k, v of d #NOTE: null values will be replaced if a default value exists.\n\t\t\t\treturn base\n\t\tupdate:\n\t\t\tenumerable: false\n\t\t\tvalue: (base, updates...) -> #NOTE: modified inplace, use copy() to protect it.\n\t\t\t\tfor d in updates when d?\n\t\t\t\t\tbase[k] = v for k, v of d\n\t\t\t\treturn base\n\n\treturn {\n\t\tString, Array, Object\n\t}\n\nmodule.exports = this_module {String, Array, Object}\n"]}