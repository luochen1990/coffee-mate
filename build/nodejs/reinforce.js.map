{"version":3,"sources":["reinforce.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,WAAA;IAAA,gBAAA;;AAAA,EAAA,WAAA,GAAc,SAAC,GAAD,GAAA;AAGb,QAAA,qBAAA;AAAA,IAHe,aAAA,QAAQ,YAAA,OAAO,aAAA,MAG9B,CAAA;AAAA,IAAA,MAAM,CAAC,gBAAP,CAAwB,MAAM,CAAC,SAA/B,EACC;AAAA,MAAA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAC,IAAD,GAAA;iBACN,IAAC,CAAC,OAAF,CAAU,YAAV,EAAwB,SAAC,CAAD,EAAI,CAAJ,GAAA;AAAU,YAAA,IAAG,eAAH;qBAAiB,IAAK,CAAA,CAAA,EAAtB;aAAA,MAAA;qBAA8B,EAA9B;aAAV;UAAA,CAAxB,EADM;QAAA,CADP;OADD;AAAA,MAIA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAC,CAAD,GAAA;AACN,cAAA,WAAA;AAAA,UAAA,MAAW,CAAC,EAAD,EAAK,IAAL,CAAX,EAAC,UAAD,EAAI,YAAJ,CAAA;AACA,iBAAM,CAAA,GAAI,CAAV,GAAA;AACC,YAAA,IAAY,CAAA,GAAI,CAAhB;AAAA,cAAA,CAAA,IAAK,GAAL,CAAA;aAAA;AAAA,YACA,CAAA,KAAM,CADN,CAAA;AAAA,YAEA,GAAA,IAAO,GAFP,CADD;UAAA,CADA;AAKA,iBAAO,CAAP,CANM;QAAA,CADP;OALD;AAAA,MAaA,GAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAC,SAAD,EAAY,OAAZ,GAAA;AACN,cAAA,IAAA;AAAA,UAAA,CAAA,GAAI,IAAC,CAAC,MAAF,CAAS,SAAT,CAAA,GAAsB,CAA1B,CAAA;AACA,UAAA,IAAe,CAAA,KAAK,CAApB;AAAA,mBAAO,IAAP,CAAA;WADA;AAAA,UAEA,CAAA,GAAI,IAAC,CAAC,MAAF,CAAS,CAAT,CAAW,CAAC,MAAZ,CAAmB,OAAnB,CAFJ,CAAA;AAGA,UAAA,IAAe,CAAA,KAAK,CAAA,CAApB;AAAA,mBAAO,IAAP,CAAA;WAHA;iBAIA,IAAC,CAAC,MAAF,CAAS,CAAT,EAAY,CAAZ,EALM;QAAA,CADP;OAdD;KADD,CAAA,CAAA;AAAA,IAyBA,MAAM,CAAC,gBAAP,CAAwB,KAAK,CAAC,SAA9B,EACC;AAAA,MAAA,KAAA,EACC;AAAA,QAAA,GAAA,EAAK,SAAA,GAAA;iBAAG,IAAE,CAAA,CAAA,EAAL;QAAA,CAAL;AAAA,QACA,GAAA,EAAK,SAAC,CAAD,GAAA;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO,EAAd;QAAA,CADL;OADD;AAAA,MAGA,MAAA,EACC;AAAA,QAAA,GAAA,EAAK,SAAA,GAAA;iBAAG,IAAE,CAAA,CAAA,EAAL;QAAA,CAAL;AAAA,QACA,GAAA,EAAK,SAAC,CAAD,GAAA;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO,EAAd;QAAA,CADL;OAJD;AAAA,MAMA,KAAA,EACC;AAAA,QAAA,GAAA,EAAK,SAAA,GAAA;iBAAG,IAAE,CAAA,CAAA,EAAL;QAAA,CAAL;AAAA,QACA,GAAA,EAAK,SAAC,CAAD,GAAA;iBAAO,IAAE,CAAA,CAAA,CAAF,GAAO,EAAd;QAAA,CADL;OAPD;AAAA,MASA,IAAA,EACC;AAAA,QAAA,GAAA,EAAK,SAAA,GAAA;iBAAG,IAAE,CAAA,IAAC,CAAA,MAAD,GAAU,CAAV,EAAL;QAAA,CAAL;AAAA,QACA,GAAA,EAAK,SAAC,CAAD,GAAA;iBAAO,IAAE,CAAA,IAAC,CAAA,MAAD,GAAU,CAAV,CAAF,GAAiB,EAAxB;QAAA,CADL;OAVD;AAAA,MAYA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAC,CAAD,GAAA;AACN,cAAA,WAAA;AAAA,UAAA,MAAW,CAAC,EAAD,EAAK,IAAL,CAAX,EAAC,UAAD,EAAI,YAAJ,CAAA;AACA,iBAAM,CAAA,GAAI,CAAV,GAAA;AACC,YAAA,IAAqB,CAAA,GAAI,CAAzB;AAAA,cAAA,CAAA,GAAI,CAAC,CAAC,MAAF,CAAS,GAAT,CAAJ,CAAA;aAAA;AAAA,YACA,CAAA,KAAM,CADN,CAAA;AAAA,YAEA,GAAA,GAAM,GAAG,CAAC,MAAJ,CAAW,GAAX,CAFN,CADD;UAAA,CADA;AAKA,iBAAO,CAAP,CANM;QAAA,CADP;OAbD;AAAA,MAqBA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAU,CAAA,SAAA,GAAA;AACT,cAAA,IAAA;AAAA,UAAA,IAAA,GAAO,GAAA,CAAA,MAAP,CAAA;iBACA,SAAC,KAAD,GAAA;AACC,gBAAA,2BAAA;AAAA,YAAA,CAAA,GAAI,CAAJ,CAAA;AAAA,YACA,CAAA,GAAI,IADJ,CAAA;AAEA,YAAA,IAAO,aAAP;AACC,mBAAA,8CAAA;4BAAA;sBAAmB,CAAA,KAAK;;iBACvB;AAAA,gBAAA,IAAE,CAAA,CAAA,CAAF,GAAO,CAAA,GAAI,CAAX,CAAA;AAAA,gBACA,CAAA,IAAK,CADL,CADD;AAAA,eADD;aAAA,MAAA;AAKC,mBAAA,gDAAA;4BAAA;sBAAmB,CAAA,KAAK,IAAL,IAAa,CAAA,KAAI,CAAM,CAAN,EAAS,CAAT;;iBACnC;AAAA,gBAAA,IAAE,CAAA,CAAA,CAAF,GAAO,CAAA,GAAI,CAAX,CAAA;AAAA,gBACA,CAAA,IAAK,CADL,CADD;AAAA,eALD;aAFA;AAAA,YAUA,IAAC,CAAA,MAAD,CAAQ,CAAR,EAAW,QAAX,CAVA,CAAA;AAWA,mBAAO,IAAP,CAZD;UAAA,EAFS;QAAA,CAAA,CAAH,CAAA,CADP;OAtBD;KADD,CAzBA,CAAA;AAAA,IAmEA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,EACC;AAAA,MAAA,IAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAC,CAAD,GAAA;iBAAO,MAAM,CAAC,IAAP,CAAY,CAAZ,CAAc,CAAC,OAAtB;QAAA,CADP;OADD;AAAA,MAGA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAA,GAAA;AACN,cAAA,+BAAA;AAAA,UADO,qBAAM,gEACb,CAAA;AAAA,eAAA,0CAAA;4BAAA;gBAAuB;AACtB,mBAAA,MAAA;yBAAA;;kBAAA,IAAK,CAAA,CAAA,IAAM;iBAAX;AAAA;aADD;AAAA,WAAA;AAEA,iBAAO,IAAP,CAHM;QAAA,CADP;OAJD;AAAA,MASA,MAAA,EACC;AAAA,QAAA,UAAA,EAAY,KAAZ;AAAA,QACA,KAAA,EAAO,SAAA,GAAA;AACN,cAAA,8BAAA;AAAA,UADO,qBAAM,+DACb,CAAA;AAAA,eAAA,yCAAA;2BAAA;gBAAsB;AACrB,mBAAA,MAAA;yBAAA;AAAA,gBAAA,IAAK,CAAA,CAAA,CAAL,GAAU,CAAV,CAAA;AAAA;aADD;AAAA,WAAA;AAEA,iBAAO,IAAP,CAHM;QAAA,CADP;OAVD;KADD,CAnEA,CAAA;AAoFA,WAAO;AAAA,MACN,QAAA,MADM;AAAA,MACE,OAAA,KADF;AAAA,MACS,QAAA,MADT;KAAP,CAvFa;EAAA,CAAd,CAAA;;AAAA,EA2FA,MAAM,CAAC,OAAP,GAAiB,WAAA,CAAY;AAAA,IAAC,QAAA,MAAD;AAAA,IAAS,OAAA,KAAT;AAAA,IAAgB,QAAA,MAAhB;GAAZ,CA3FjB,CAAA;AAAA","file":"reinforce.js","sourceRoot":"/source/","sourcesContent":["this_module = ({String, Array, Object}) ->\n\t# reinforce String\n\n\tObject.defineProperties String.prototype,\n\t\tformat:\n\t\t\tenumerable: false\n\t\t\tvalue: (args) ->\n\t\t\t\t@.replace /\\{(\\w+)\\}/g, (m, i) -> if args[i]? then args[i] else m\n\t\trepeat:\n\t\t\tenumerable: false\n\t\t\tvalue: (n) ->\n\t\t\t\t[r, pat] = ['', @]\n\t\t\t\twhile n > 0\n\t\t\t\t\tr += pat if n & 1\n\t\t\t\t\tn >>= 1\n\t\t\t\t\tpat += pat\n\t\t\t\treturn r\n\t\tcut:\n\t\t\tenumerable: false\n\t\t\tvalue: (start_pat, end_pat) ->\n\t\t\t\ti = @.search(start_pat) + 1\n\t\t\t\treturn null if i == 0\n\t\t\t\tj = @.substr(i).search(end_pat)\n\t\t\t\treturn null if j == -1\n\t\t\t\t@.substr(i, j)\n\n\t# reinforce Array\n\n\tObject.defineProperties Array.prototype,\n\t\tfirst:\n\t\t\tget: -> @[0]\n\t\t\tset: (v) -> @[0] = v\n\t\tsecond:\n\t\t\tget: -> @[1]\n\t\t\tset: (v) -> @[1] = v\n\t\tthird:\n\t\t\tget: -> @[2]\n\t\t\tset: (v) -> @[2] = v\n\t\tlast:\n\t\t\tget: -> @[@length - 1]\n\t\t\tset: (v) -> @[@length - 1] = v\n\t\trepeat:\n\t\t\tenumerable: false\n\t\t\tvalue: (n) ->\n\t\t\t\t[r, pat] = [[], @]\n\t\t\t\twhile n > 0\n\t\t\t\t\tr = r.concat(pat) if n & 1\n\t\t\t\t\tn >>= 1\n\t\t\t\t\tpat = pat.concat(pat)\n\t\t\t\treturn r\n\t\tunique:\n\t\t\tenumerable: false\n\t\t\tvalue: do ->\n\t\t\t\tinit = new Object\n\t\t\t\t(equal)->\n\t\t\t\t\ti = 0\n\t\t\t\t\tt = init\n\t\t\t\t\tif not equal?\n\t\t\t\t\t\tfor x, j in @ when x != t\n\t\t\t\t\t\t\t@[i] = t = x\n\t\t\t\t\t\t\ti += 1\n\t\t\t\t\telse\n\t\t\t\t\t\tfor x, j in @ when t is init or not equal(x, t)\n\t\t\t\t\t\t\t@[i] = t = x\n\t\t\t\t\t\t\ti += 1\n\t\t\t\t\t@splice(i, Infinity)\n\t\t\t\t\treturn @\n\n\t# reinforce Object\n\n\tObject.defineProperties Object,\n\t\tsize:\n\t\t\tenumerable: false\n\t\t\tvalue: (d) -> Object.keys(d).length\n\t\textend:\n\t\t\tenumerable: false\n\t\t\tvalue: (base, defaults...) -> #NOTE: modified inplace, use copy() to protect it.\n\t\t\t\tfor d in defaults when d?\n\t\t\t\t\tbase[k] ?= v for k, v of d #NOTE: null values will be replaced if a default value exists.\n\t\t\t\treturn base\n\t\tupdate:\n\t\t\tenumerable: false\n\t\t\tvalue: (base, updates...) -> #NOTE: modified inplace, use copy() to protect it.\n\t\t\t\tfor d in updates when d?\n\t\t\t\t\tbase[k] = v for k, v of d\n\t\t\t\treturn base\n\n\treturn {\n\t\tString, Array, Object\n\t}\n\nmodule.exports = this_module {String, Array, Object}\n"]}